# Enraiged Laravel

### Laravel +Vue +Inertiajs +PrimeVue +Vite

+ [Laravel 9](https://laravel.com/docs/9.x/releases)
+ [Vue 3](https://vuejs.org/guide/introduction.html)
+ [Inertia.js v1](https://inertiajs.com/)
+ [PrimeVUE 3](https://www.primefaces.org/primevue/#/setup)
+ [PrimeFlex 3](https://www.primefaces.org/primeflex/)
+ [PrimeIcons v6](https://www.primefaces.org/primevue/#/icons)

---

## Install Application

Retrieve the repository contents:

```sh
cd /path/to/your/repos/ # ensure you are in the correct directory
git clone https://github.com/tcytra/enraiged-laravel
cd enraiged-laravel/
```

Install the vendor packages:

```sh
composer install
```

---

## Configure Application

The application configuration file must be created and updated to suit the environment:

```sh
cp .env.example .env     # create the .env file from the example config
php artisan key:generate # create the application key
```

The setup from the .env.example will be enough to get you started in a local environment. At minimum, a valid database 
connection will need to be created in the .env config file. Change the appropriate lines to match the environment:

> **Note:** You could edit these from the command line using `sed`.

```sh
sed -i 's|DB_HOST=.*|DB_HOST=127.0.0.1|' .env
sed -i 's|DB_DATABASE=.*|DB_DATABASE=enraiged|' .env
sed -i 's|DB_USERNAME=.*|DB_USERNAME=enraiged|' .env
sed -i 's|DB_PASSWORD=.*|DB_PASSWORD=changeme|' .env
```

> **Note:** Non standard values have been placed into the .env.example config file and will be copied to your .env:

```
ALLOW_REGISTER=true
AUTO_LOGIN=true
```

These values will override their counterpart definitions in the config/enraiged/auth.php config file. Completely remove
these from your .env if you wish to control these parameters from the enraiged auth config array.

**ALLOW_REGISTER** will turn on or off the ability to register an account as a guest.

**AUTO_LOGIN** will enable or disable the automatic post-registration login

> **Note:** AUTO_LOGIN will not take effect if the User model is configured to verify registered email addresses.

---

## Build Database

We can now execute the data migration and seeder scripts:

```sh
php artisan migrate --seed
```

---

## Build Client

Finally, we will install the node packages and build the front-end resources. Start with:

```sh
npm install
```

Launch the vite development build (during development):

```sh
npm run dev
```

When complete, build the app for service:

```sh
npm run build
```

---

## Serve the application

The simplest way to launch and preview this application is with `artisan serve`:

```sh
php artisan serve
```

Run the SSR server:

```sh
php artisan inertia:start-ssr
```

Now, navigate to (http://127.0.0.1:8000/), et voilÃ .

Serving this application by other means is beyond the scope of this README.


Stop the SSR server:

```sh
php artisan inertia:stop-ssr
```

Please see [https://inertiajs.com/server-side-rendering](https://inertiajs.com/server-side-rendering) for more 
information.

---

## Known Issues


For running the SSR server, the `~/bootstrap/ssr/ssr.mjs` file is generated by the run build command, but the import 
lines at the top of the file do not include the target file extensions, which ES6 cannot handle as it does not import 
directories. It seems that only the Primevue components are causing this issue, but Primevue does support SSR so I'm
certain this is an issue on my part. For now I'm manually adding these file extensions (See below).

Also, when SSR is running, I'm seeing the following error (and I'm not sure what it means yet):

```
[Vue warn]: Invalid vnode type when creating vnode: undefined.
```

> These are the lines I have to replace at the top of the `~/bootstrap/ssr/ssr.mjs` file.

```
import { useSSRContext, computed, mergeProps, resolveDirective, resolveComponent, defineAsyncComponent, withCtx, createVNode, openBlock, createBlock, Fragment, renderList, Transition, renderSlot, resolveDynamicComponent, createCommentVNode, toDisplayString, createTextVNode, withDirectives, vShow, withModifiers, withKeys, createSlots, createSSRApp, h } from "vue";
import { format } from "date-fns";
import { router, Head, Link, useForm, createInertiaApp } from "@inertiajs/vue3";
import { ssrRenderAttrs, ssrRenderSlot, ssrInterpolate, ssrRenderClass, ssrRenderAttr, ssrGetDirectiveProps, ssrRenderComponent, ssrRenderList, ssrRenderStyle, ssrRenderVNode, ssrIncludeBooleanAttr } from "vue/server-renderer";
import { FilterService, FilterOperator, FilterMatchMode } from "primevue/api/api.cjs.js";
import { ZIndexUtils, DomHandler, ConnectedOverlayScrollHandler, UniqueComponentId, ObjectUtils } from "primevue/utils/utils.js";
import { renderToString } from "@vue/server-renderer";
import createServer from "@inertiajs/vue3/server";
import Badge from "primevue/badge/badge.cjs.js";
import Button from "primevue/button/button.cjs.js";
import Dialog from "primevue/dialog/dialog.cjs.js";
import Dropdown from "primevue/dropdown/dropdown.cjs.js";
import ConfirmationEventBus from "primevue/confirmationeventbus/confirmationeventbus.cjs.js";
import FocusTrap from "primevue/focustrap/focustrap.cjs.js";
import InputText from "primevue/inputtext/inputtext.cjs.js";
import Message from "primevue/message/message.cjs.js";
import OverlayEventBus from "primevue/overlayeventbus/overlayeventbus.cjs.js";
import Paginator from "primevue/paginator/paginator.cjs.js";
import Portal from "primevue/portal/portal.cjs.js";
import PrimevueTooltip from "primevue/tooltip/tooltip.cjs.js";
import ProgressBar from "primevue/progressbar/progressbar.cjs.js";
import Ripple from "primevue/ripple/ripple.cjs.js";
import VirtualScroller from "primevue/virtualscroller/virtualscroller.cjs.js";
```


## License

Enraiged Laravel is open-sourced software licensed under the [MIT license](https://opensource.org/licenses/MIT).
